(window.webpackJsonp=window.webpackJsonp||[]).push([[203],{1688:function(s,a,n){"use strict";n.r(a);var r=n(5),t=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_066-纯手工集群部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_066-纯手工集群部署"}},[s._v("#")]),s._v(" 066. 纯手工集群部署")]),s._v(" "),a("h2",{attrs:{id:"确认是否安装了依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#确认是否安装了依赖"}},[s._v("#")]),s._v(" 确认是否安装了依赖")]),s._v(" "),a("ul",[a("li",[s._v("java 1.7 +")]),s._v(" "),a("li",[s._v("pythong 2.6.6 该软件之前被安装过")])]),s._v(" "),a("h2",{attrs:{id:"storm-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storm-安装"}},[s._v("#")]),s._v(" storm 安装")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /usr/local\ntar -zxvf apache-storm-1.1.0.tar.gz\nmv apache-storm-1.1.0 storm\n\n# 配置环境变量，添加 /usr/local/bin\nvi ~/.bashrc\nsource ~/.bashrc\n\n# 查看 storm 版本\nstorm version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"修改-storm-配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-storm-配置文件"}},[s._v("#")]),s._v(" 修改 storm 配置文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('mkdir /var/storm\nvi /usr/local/storm/conf/storm.yaml\n# 需要修改的配置内容如下：\n# -------------------------\nstorm.zookeeper.servers:\n     - "192.168.99.170"\n     - "192.168.99.171"\n     - "192.168.99.172"\n# storm.zookeeper.port: 2181\nnimbus.seeds: ["192.168.99.170"]\n\nstorm.local.dir: "/var/storm"\n\n# 指定每个机器上可以启动多少个 worker，一个端口号代表一个\nsupervisor.slots.ports:\n    - 6700\n    - 6701\n    - 6702\n    - 6703\n\n# -------------------------\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("一台装好了，再装另外的几台，通过 scp 命令 copy")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("scp ~/.bashrc root@eshop-cache02:~/\nscp -r /usr/local/storm/ root@eshop-cache02:/usr/local/\n\n并创建 mkdir /var/storm 和刷新环境变量文件 source ~/.bashrc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("一共创建三个节点：在 eshop-cache01、eshop-cache02、eshop-cache03")]),s._v(" "),a("h2",{attrs:{id:"启动-storm-集群和-ui-界面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-storm-集群和-ui-界面"}},[s._v("#")]),s._v(" 启动 storm 集群和 ui 界面")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 一个节点 在 01 上\nstorm nimbus >/dev/null 2>&1 &\n# 三个节点\nstorm supervisor >/dev/null 2>&1 &\n# 也是需要三个节点，否则在 ui 中访问 8000 端口的日志浏览会404\nstorm logviewer > /dev/null 2>&1 &\n# 一个节点 在 01 上\nstorm ui >/dev/null 2>&1 &\n\n# 可以通过 jps 命令查看是否已经启动\n[root@eshop-cache01 conf]# jps\n10116 Jps\n1576 Kafka\n1447 QuorumPeerMain\n9944 nimbus   这里已经被启动了\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("ui 访问地址："),a("code",[s._v("http://eshop-cache01:8080/index.html")])]),s._v(" "),a("p",[a("img",{attrs:{src:n(460),alt:""}})])])}),[],!1,null,null,null);a.default=t.exports},460:function(s,a,n){s.exports=n.p+"assets/img/markdown-img-paste-20190519171446988.9635fbb1.png"}}]);